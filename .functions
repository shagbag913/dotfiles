#!/usr/bin/env bash
set +e
if [[ ${HOSTNAME} = ShagBox && -n "${SSH_CLIENT}" || -n "${SSH_TTY}" ]]; then
    exit() {
        echo -n "You're connected via ssh. Are you sure you want to exit? [y/N]: "
        read -n 1 yorn
        case ${yorn} in
            y|Y) command exit;;
            n|N) echo -e "\nNot exiting."
        esac
    }
fi

pacman_search() {
  pacman -Qq | grep ${1}
}

shakku() {
    for i in "$@"; do
        if [[ ! $i =~ ^- ]]; then
            if [[ $1 =~ -R ]]; then
                echo $i > ~/uninstall_log
            elif [[ $1 = -S ]]; then
                echo $i > ~/install_log
            fi
        fi
    done
    while [[ $# -ge 1 ]]; do
        case $1 in
            -Rlog)
                echo "Uninstall log:"
                cat ~/uninstall_log
                return;;
            -Slog)
                echo "Install log:"
                cat ~/install_log
                return;;
            *) pakku "$@"
        esac
        shift
    done
    echo "$@"
}

reposync() {
    time schedtool -B -n 1 -e ionice -n 1 repo sync -j$(($(nproc --all)*2-1)) --no-clone-bundle --prune --no-tags -q "$@"
}

grive() {
    if [[ $# = 0 ]]; then
        command grive -p /media/shagbag913/Roms/gdrive
        return
    else
        command grive "$@"
        return
    fi
}
